{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/m/Desktop/study/project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/m/Desktop/study/project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/m/Desktop/study/project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Board(){var _ref2;// 게시글 제목, 글쓴이, 내용, 그리고 선택한 파일을 관리할 상태 변수\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),no=_useState2[0],setNo=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),who=_useState6[0],setWho=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),content=_useState8[0],setContent=_useState8[1];// const [file, setFile] = useState('');\nvar navigate=useNavigate();var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),focus=_useState10[0],setFocus=_useState10[1];var _useParams=useParams(),id=_useParams.id;useEffect(function(){var _ref;var postNum=function postNum(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('http://localhost:4000/getNum');case 3:response=_context.sent;setNo(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('게시글 번호를 가져오는 중 오류 발생:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}))).apply(this,arguments);};// 페이지가 로드될 때 게시글 번호를 가져오도록 설정\npostNum();},[]);var Submit=function Submit(_x){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var newPost;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:newPost={no:no,title:title,who:who,content:content};console.log(newPost.no);if(!(!title||!who||!content)){_context2.next=6;break;}alert('모든 항목을 작성해주세요!');_context2.next=20;break;case 6:_context2.prev=6;_context2.next=9;return axios.post(\"http://localhost:4000/Board/:\".concat(id),newPost);case 9:alert('등록 완료!');// 폼 초기화\nsetTitle('');setWho('');setContent('');setNo(no+1);_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](6);console.error('등록 중 오류 발생:',_context2.t0);case 19:navigate(\"/Board/\".concat(newPost.no),{state:{post:newPost}});case 20:case\"end\":return _context2.stop();}},_callee2,null,[[6,16]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bar\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uAE00 \\uC791\\uC131\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"no\",children:\"\\uAE00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"no\",value:no,className:\"space\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"title\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);},onFocus:function onFocus(){return setFocus('title');},onBlur:function onBlur(){return setFocus('');},className:\"space\"}),focus=='title'&&!title&&/*#__PURE__*/_jsx(\"div\",{className:\"focus\",children:\"\\uD544\\uC218 \\uD56D\\uBAA9\\uC785\\uB2C8\\uB2E4!\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"who\",children:\"\\uAE00\\uC4F4\\uC774\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"who\",value:who,onChange:function onChange(e){return setWho(e.target.value);},onFocus:function onFocus(){return setFocus('who');},onBlur:function onBlur(){return setFocus('');},className:\"space\"}),focus==='who'&&!who&&/*#__PURE__*/_jsx(\"div\",{className:\"focus\",children:\"\\uD544\\uC218 \\uD56D\\uBAA9\\uC785\\uB2C8\\uB2E4!\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"content\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",value:content,onChange:function onChange(e){return setContent(e.target.value);},onFocus:function onFocus(){return setFocus('content');},onBlur:function onBlur(){return setFocus('');},className:\"space1\"}),focus==='content'&&!content&&/*#__PURE__*/_jsx(\"div\",{className:\"focus\",children:\"\\uD544\\uC218 \\uD56D\\uBAA9\\uC785\\uB2C8\\uB2E4!\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{width:130},onClick:Submit,children:\"\\uAC8C\\uC2DC\\uAE00 \\uC791\\uC131\"})]})]});}export default Board;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","Board","_ref2","_useState","_useState2","_slicedToArray","no","setNo","_useState3","_useState4","title","setTitle","_useState5","_useState6","who","setWho","_useState7","_useState8","content","setContent","navigate","_useState9","_useState10","focus","setFocus","_useParams","id","_ref","postNum","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","data","t0","console","error","stop","apply","arguments","Submit","_x","_callee2","e","newPost","_callee2$","_context2","log","alert","post","concat","state","className","children","htmlFor","type","value","onChange","target","onFocus","onBlur","style","width","onClick"],"sources":["C:/Users/m/Desktop/study/project/src/routes/Board.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate , useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n\r\nfunction Board() {\r\n  // 게시글 제목, 글쓴이, 내용, 그리고 선택한 파일을 관리할 상태 변수\r\n  let [no, setNo] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [who, setWho] = useState('');\r\n  const [content, setContent] = useState('');\r\n  // const [file, setFile] = useState('');\r\n  const navigate = useNavigate();\r\n  const [focus, setFocus] = useState('');\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    const postNum = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:4000/getNum');\r\n        setNo(response.data);\r\n      } catch (error) {\r\n        console.error('게시글 번호를 가져오는 중 오류 발생:', error);\r\n      }\r\n    };\r\n    // 페이지가 로드될 때 게시글 번호를 가져오도록 설정\r\n    postNum();\r\n  }, []);\r\n\r\n \r\n  const Submit = async (e) => {\r\n    const newPost = {\r\n      no : no,\r\n      title, who, content\r\n  };\r\n\r\n  console.log(newPost.no);\r\n\r\n  if(!title || !who || !content){\r\n    alert('모든 항목을 작성해주세요!')\r\n  } else {\r\n    try {\r\n      await axios.post(`http://localhost:4000/Board/:${id}` , newPost);\r\n      alert('등록 완료!');\r\n      // 폼 초기화\r\n      setTitle('');\r\n      setWho('');\r\n      setContent('');\r\n      setNo(no + 1);\r\n    } catch (error) {\r\n      console.error('등록 중 오류 발생:', error);\r\n    }\r\n\r\n\r\n    navigate(`/Board/${newPost.no}`, { state: { post: newPost } });\r\n  }\r\n  // 파라미터 7이면 그 해당 게시글 상세보기 화면이 떠야함\r\n\r\n};\r\n\r\n\r\n  return (\r\n    <div className='bar'>\r\n      <h1>글 작성</h1>\r\n      <form>\r\n      <div>\r\n          <div htmlFor=\"no\">글번호</div>\r\n          <input\r\n            type=\"text\"\r\n            id=\"no\"\r\n            value={no}\r\n            className='space'\r\n          />\r\n        </div>\r\n        <div>\r\n          <div htmlFor=\"title\">제목</div>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            onFocus={() => setFocus('title')}\r\n            onBlur={() => setFocus('')}\r\n            className='space'\r\n          />\r\n            {focus == 'title' && !title && <div className='focus'>필수 항목입니다!</div>}\r\n        </div>\r\n        <div>\r\n          <div htmlFor=\"who\">글쓴이</div>\r\n          <input\r\n            type=\"text\"\r\n            id=\"who\"\r\n            value={who}\r\n            onChange={(e) => setWho(e.target.value)}\r\n            onFocus={() => setFocus('who')}\r\n            onBlur={() => setFocus('')}\r\n            className='space'\r\n          />\r\n          {focus === 'who' && !who && <div className='focus'>필수 항목입니다!</div>}\r\n        </div>\r\n        <div>\r\n          <div htmlFor=\"content\">내용</div>\r\n          <textarea\r\n            id=\"content\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            onFocus={() => setFocus('content')}\r\n            onBlur={() => setFocus('')}\r\n            className='space1'\r\n          />\r\n          {focus === 'content' && !content && <div className='focus'>필수 항목입니다!</div>}\r\n        </div>\r\n        \r\n        {/* <div>\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            accept=\"image/*\" // 이미지 파일만 허용하도록 설정\r\n            value={file}\r\n            onChange={(e) => setFile(e.target.value)}\r\n            className='space'\r\n          />\r\n        </div> */}\r\n        <button type=\"button\" style={{ width : 130 }} onClick={Submit}>\r\n          게시글 작성\r\n        </button>\r\n      </form>\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Board;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}